{"version":3,"sources":["widget/widget.tsx"],"names":[],"mappings":"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","file":"../../js/widget/widget.js","sourcesContent":["/// <reference path=\"../definition/react.d.ts\" />\r\n/// <reference path=\"../definition/react-dom.d.ts\" />\r\n/// <reference path=\"../definition/jquery.d.ts\" />\r\nimport React = require('react');\r\nimport ReactDOM = require('react-dom');\r\nimport jq = require('jquery');\r\nimport EventQueue = require('../util/event-queue');\r\n\r\n\r\nexport const QUEUE_EVENTS = {\r\n    ON_RESIZE: 'onResize'\r\n}\r\n\r\nlet queueName = 'bwWidgetQueue';\r\nlet queue: EventQueue.Queue<WidgetQueueEvent>;\r\n\r\nexport function sendResize() {\r\n    queue.send({ name: QUEUE_EVENTS.ON_RESIZE, data: {} });\r\n}\r\n\r\nif (window && !(window as any)[queueName]) {\r\n    (window as any)[queueName] = queue = new EventQueue.SimpleQueue<WidgetQueueEvent>();\r\n    jq(window).bind('resize', sendResize);\r\n}\r\n\r\n//http://wrapbootstrap.com/preview/WB09498FH\r\n//https://react.rocks/tag/Layout\r\n//https://github.com/kriasoft/react-starter-kit\r\n\r\n//https://github.com/tastejs/todomvc/tree/gh-pages/examples/typescript-react\r\n//http://www.newmediacampaigns.com/blog/refactoring-react-components-to-es6-classes\r\n\r\n\r\nexport interface WidgetQueueEvent extends EventQueue.Event {\r\n}\r\n\r\n\r\n//NOTE enum should alway start with 1 (default is 0), \r\n//if not you will get wrong logic when using old js style if(enum) to check undefined\r\nexport enum VPos {\r\n    top = 1, middle, bottom\r\n}\r\nexport enum HPos {\r\n    left = 1, center, right\r\n}\r\nexport enum AniEffect {\r\n    /**\r\n     * fade out to hide, in to show\r\n     */\r\n    fade = 1,\r\n    /**\r\n     * slid up to hide, down to show\r\n     */\r\n    slide,\r\n    /**\r\n     * slid left to hide, right to show\r\n     */\r\n    slideLeft\r\n}\r\n\r\nexport interface Animation {\r\n    effect: AniEffect\r\n    duration?: number\r\n}\r\n\r\nexport interface ItemRenderer<D> {\r\n    key(idx: number, each: D): string | number\r\n    render(idx: number, each: D): React.ReactNode\r\n}\r\n\r\nexport interface Selection<D> {\r\n    isSelected: (idx: number, item: D) => boolean\r\n}\r\n\r\n/**\r\n * an immutable index selection, it check the selection by index in isSelected\r\n * the implementation is always multiple selectable, \r\n * if you need a single selectable, you just new a instance then it will be \r\n */\r\nexport class IndexSelection implements Selection<any>{\r\n    private selection: number[] = [];\r\n    private selectedSet: any = {};\r\n    constructor(...selection: number[]) {\r\n        selection.forEach((each) => {\r\n            this.add(each);\r\n        });\r\n    }\r\n    private add(idx: number) {\r\n        if (this.selectedSet[idx]) {\r\n            return;\r\n        }\r\n        this.selection.push(idx);\r\n        this.selectedSet[idx] = true;\r\n    }\r\n    isSelected(idx: number, item: any) {\r\n        return true == this.selectedSet[idx];\r\n    }\r\n    select(...selection: number[]): IndexSelection {\r\n        return new IndexSelection(...this.selection, ...selection);\r\n    }\r\n    unselect(...selection: number[]): IndexSelection {\r\n        let newsel: number[] = [];\r\n        let toremoves: any = {};\r\n        selection.forEach((each) => {\r\n            toremoves[each] = true;\r\n        });\r\n\r\n        this.selection.forEach((each) => {\r\n            if (!toremoves[each]) {\r\n                newsel.push(each);\r\n            }\r\n        });\r\n        return new IndexSelection(...newsel);\r\n    }\r\n    getSelection(): number[] {\r\n        return this.selection.length == 0 ? undefined : this.selection.slice();\r\n    }\r\n}\r\n\r\n/**\r\n * an immutable instance selection, it check the selection by instance equal(===) in isSelected\r\n * the implementation is always multiple selectable, \r\n * if you need a single selectable, you just new a instance then it will be \r\n */\r\nexport class InstanceSelection<D> implements Selection<D>{\r\n    private selection: D[] = [];\r\n    constructor(...selection: D[]) {\r\n        selection.forEach((each, idx) => {\r\n            this.add(each);\r\n        });\r\n    }\r\n    private add(item: D) {\r\n        let exist = false;\r\n        //check exist or not\r\n        if (this.selection.some((each) => {\r\n            return item === each;\r\n        })) {\r\n            return;\r\n        }\r\n        this.selection.push(item);\r\n    }\r\n    isSelected(idx: number, item: D) {\r\n        return this.selection.some((each) => {\r\n            return item === each;\r\n        });\r\n    }\r\n    select(...selection: D[]): InstanceSelection<D> {\r\n        return new InstanceSelection(...this.selection, ...selection);\r\n    }\r\n    unselect(...selection: D[]): InstanceSelection<D> {\r\n        let newsel: D[] = [];\r\n\r\n        this.selection.forEach((each) => {\r\n            if (selection.some((remove) => {\r\n                return remove === each;\r\n            })) {\r\n                return;\r\n            }\r\n            newsel.push(each);\r\n        });\r\n        return new InstanceSelection(...newsel);\r\n    }\r\n    getSelection(): D[] {\r\n        return this.selection.length == 0 ? undefined : this.selection.slice();\r\n    }\r\n}\r\n\r\n/**\r\n * an immutable instance selection by key, it check the selection by keyName field of instance in isSelected\r\n * the implementation is always multiple selectable, \r\n * if you need a single selectable, you just new a instance then it will be \r\n */\r\nexport class KeySelection<D> implements Selection<D>{\r\n    private selection: D[] = [];\r\n    private selectedSet: any = {}\r\n    private key: (element: D) => string\r\n    constructor(key: (element: D) => string, ...selection: D[]) {\r\n        this.key = key;\r\n        selection.forEach((each, idx) => {\r\n            this.add(each);\r\n        });\r\n    }\r\n\r\n    private add(item: D) {\r\n        let key = this.key(item);\r\n        if (this.selectedSet[key]) {\r\n            return;\r\n        }\r\n        this.selectedSet[key] = true;\r\n        this.selection.push(item);\r\n    }\r\n    isSelected(idx: number, item: D) {\r\n        let key = this.key(item);\r\n        return true == this.selectedSet[key];\r\n    }\r\n    select(...selection: D[]): KeySelection<D> {\r\n        return new KeySelection(this.key, ...this.selection, ...selection);\r\n    }\r\n    unselect(...selection: D[]): KeySelection<D> {\r\n        let newsel: D[] = [];\r\n        let toremoves = selection.slice();\r\n\r\n        this.selection.forEach((each) => {\r\n            let eachKey = this.key(each);\r\n            if (selection.some((remove) => {\r\n                return eachKey == this.key(remove);\r\n            })) {\r\n                return;\r\n            }\r\n            newsel.push(each);\r\n        });\r\n        return new KeySelection(this.key, ...newsel);\r\n    }\r\n    getSelection(): D[] {\r\n        return this.selection.length == 0 ? undefined : this.selection.slice();\r\n    }\r\n}\r\n/**\r\n    componentWillMount(): void {\r\n        super.componentWillMount();\r\n        console.log('>componentWillMount', this);\r\n    }\r\n    componentDidMount(): void {\r\n        super.componentDidMount();\r\n        console.log('>componentDidMount', this);\r\n    }\r\n    componentWillUnmount(): void {\r\n        super.componentWillUnmount();\r\n        console.log('>componentWillUnmount', this);\r\n    }\r\n    componentWillReceiveProps(nextProps: any) {\r\n        super.componentWillReceiveProps(nextProps);\r\n        console.log('>componentWillReceiveProps', this);\r\n    }\r\n    componentWillUpdate(nextProps: any, prevState: any) {\r\n        super.componentWillUpdate(nextProps, prevState);\r\n        console.log('>componentWillUpdate', this);\r\n    }\r\n    componentDidUpdate(prevProps: any, prevState: any) {\r\n        super.componentDidUpdate(prevProps, prevState);\r\n        console.log('>componentDidUpdate', this);\r\n    }\r\n */\r\n\r\nexport interface WidgetProps {\r\n    id?: string,\r\n    className?: string,\r\n    style?: React.CSSProperties,\r\n    hidden?: boolean,\r\n    /**\r\n     * horizontal flex this widget, the weight is depends on amount of sibiling's hflex and the parent's layout implementation \r\n     */\r\n    hflex?: number,\r\n    /**\r\n     * vertical flex this widget, the weight is depends on amount of sibiling's vflex and the parent's layout implementation \r\n     */\r\n    vflex?: number,\r\n\r\n    /**\r\n     * the animation effect of visibility when updating\r\n     */\r\n    animation?: Animation\r\n\r\n    /**\r\n     * event handler\r\n     */\r\n    onClick?: (evt: Event) => void\r\n    onDoubleClick?: (evt: Event) => void\r\n    onContextMenu?: (evt: Event) => void\r\n}\r\n\r\n\r\nexport abstract class Widget<P extends WidgetProps, S>\r\n    extends React.Component<P, S> implements EventQueue.Listener<WidgetQueueEvent> {\r\n    /**\r\n     * the defaultProps which fills component's props when user doesn't assign it  \r\n     */\r\n    static defaultProps: WidgetProps = {\r\n    }\r\n    /**\r\n     * magic field for checking a widget-element is a widget\r\n     */\r\n    static _widgetMagic = true;\r\n\r\n    private _willAnimate: boolean;\r\n    private _willAnimateHidden: boolean;\r\n    private _registedQueue: boolean;\r\n\r\n    constructor(props: P) {\r\n        super(props);\r\n    }\r\n\r\n    /**\r\n     * register queue listener if this widget needs to listen global event, i.e onResize\r\n     */\r\n    protected registerQueue(): void {\r\n        if (!this._registedQueue) {\r\n            queue.add(this);\r\n            this._registedQueue = true;\r\n        }\r\n    }\r\n    /**\r\n     * unregister queue listener in componentWillUnmount if this widget has registered by registerQueue \r\n     */\r\n    protected unregisterQueue(): void {\r\n        if (this._registedQueue) {\r\n            queue.remove(this);\r\n            this._registedQueue = false;\r\n        }\r\n    }\r\n\r\n    //react js life cycle methods\r\n    componentWillMount(): void {\r\n    }\r\n    componentDidMount(): void {\r\n    }\r\n    componentWillUnmount(): void {\r\n    }\r\n    componentWillReceiveProps(nextProps: P) {\r\n    }\r\n    componentWillUpdate(nextProps: P, prevState: any) {\r\n        if (nextProps.animation) {\r\n            //when will animate, render style will use prev visisble\r\n            this._willAnimate = true;\r\n            this._willAnimateHidden = this.props.hidden;\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps: P, prevState: any) {\r\n        let willAni = this._willAnimate;\r\n        //reset\r\n        delete this._willAnimate;\r\n\r\n        if (this.props.hidden != prevProps.hidden\r\n            || this.props.hflex != prevProps.hflex\r\n            || this.props.vflex != prevProps.vflex) {\r\n\r\n            if (!willAni) {\r\n                return;\r\n            }\r\n            let ani = this.props.animation;\r\n            let jqd = jq(this.getDOM());\r\n            let dur = ani.duration ? ani.duration : 300;\r\n            let hidden = this.props.hidden;\r\n\r\n            let done = hidden ? () => {\r\n                this.sendQueueEvent(QUEUE_EVENTS.ON_RESIZE);\r\n            } : undefined;\r\n\r\n            switch (ani.effect) {\r\n                case AniEffect.fade:\r\n                    jqd.animate({ opacity: 'toggle' }, { duration: dur, done: done });\r\n                    break;\r\n                case AniEffect.slide:\r\n                    jqd.animate({ height: 'toggle' }, { duration: dur, done: done });\r\n                    break;\r\n                case AniEffect.slideLeft:\r\n                    jqd.animate({ width: 'toggle' }, { duration: dur, done: done });\r\n                    break;\r\n            }\r\n            //afater jq animiate prepare the correct size\r\n            if (!hidden) {\r\n                this.sendQueueEvent(QUEUE_EVENTS.ON_RESIZE);\r\n            }\r\n        }\r\n    }\r\n\r\n    //queue listener methods\r\n    onQueueEvent(evt: WidgetQueueEvent) { }\r\n    protected sendQueueEvent(name: string, data: any = {}) {\r\n        queue.send({\r\n            name: name,\r\n            data: data\r\n        });\r\n    }\r\n    protected postQueueEvent(name: string, data: any = {}) {\r\n        queue.post({\r\n            name: name,\r\n            data: data\r\n        }, 5);\r\n    }\r\n    protected abstract getWidgetSclass(): string\r\n\r\n    /**\r\n    * get the idx-th child widget if idx-th child is a widget\r\n    * NOTE widget has to provide correct render implementation with ref={'child'+i} so can let this method work\r\n    */\r\n    // protected getChildWidget(idx: number): Widget<WidgetProps, any> {\r\n    //     let casting: any = this;\r\n    //     return this.refs ? casting.refs['child' + idx] : undefined;\r\n    // }\r\n    \r\n    /**\r\n     * get the dom of this widget\r\n     */\r\n    protected getDOM(): any {\r\n        return ReactDOM.findDOMNode(this);\r\n    }\r\n\r\n    //redner methods, should only be called in render() lifecycle\r\n    protected getRenderType():string{\r\n        return 'div';\r\n    }\r\n    protected getRenderSclass(): string {\r\n        let str: string[] = [];\r\n        str.push(this.getWidgetSclass());\r\n        if (this.props.hflex) {\r\n            str.push('bw-hflex');\r\n        }\r\n        if (this.props.vflex) {\r\n            str.push('bw-vflex');\r\n        }\r\n        if (this.props.className) {\r\n            str.push(this.props.className);\r\n        }\r\n        return str.join(\" \");\r\n    }\r\n    protected getRenderStyle(): React.CSSProperties {\r\n        let css: React.CSSProperties = {};\r\n        if (this.props.style) {\r\n            mergeProps(css, this.props.style);\r\n        }\r\n        if (this._willAnimate) {\r\n            if (this._willAnimateHidden) {\r\n                css.display = 'none';\r\n            }\r\n        } else if (this.props.hidden) {\r\n            css.display = 'none';\r\n        }\r\n        return css;\r\n    }\r\n    protected getRenderChildren(): React.ReactNode {\r\n        return this.props.children;\r\n    }\r\n    render(): JSX.Element {\r\n        let props = this.props;\r\n        let t = this.getRenderType();\r\n        let p = {\r\n            id: props.id,\r\n            ref: 'DOM',\r\n            className: this.getRenderSclass(),\r\n            style: this.getRenderStyle(),\r\n            onClick: props.onClick,\r\n            onDoubleClick: props.onDoubleClick,\r\n            onContextMenu: props.onContextMenu\r\n        }\r\n        return React.createElement(t,p,this.getRenderChildren());\r\n    }\r\n}\r\n\r\n\r\nexport interface FonticonProps extends WidgetProps {\r\n}\r\n\r\nexport class Fonticon extends Widget<FonticonProps, any>{\r\n    static defaultProps: FonticonProps = mergeProps({\r\n    }, Widget.defaultProps)\r\n    protected getWidgetSclass() {\r\n        return 'bww-fonticon';\r\n    }\r\n    protected getRenderChildren(): React.ReactNode {\r\n        return null;\r\n    }\r\n    protected getRenderType():string{\r\n        return 'i';\r\n    }\r\n}\r\n\r\n\r\nexport interface CheckboxProps extends WidgetProps {\r\n    doCheck?: (checked: boolean) => void\r\n    onChange?: (evt: Event) => void\r\n    checked?: boolean\r\n    disabled?: boolean\r\n    label?: string\r\n}\r\n\r\nexport class Checkbox extends Widget<CheckboxProps, any>{\r\n    static defaultProps: CheckboxProps = mergeProps({\r\n    }, Widget.defaultProps)\r\n    protected getWidgetSclass() {\r\n        return 'bww-checkbox';\r\n    }\r\n    private onChange(evt: Event) {\r\n        if (this.props.doCheck) {\r\n            this.props.doCheck((evt.target as any).checked);\r\n        }\r\n        if (this.props.onChange) {\r\n            this.props.onChange(evt);\r\n        }\r\n    }\r\n    protected getRenderSclass(): string {\r\n        let str: string[] = [];\r\n        str.push(super.getRenderSclass());\r\n        if (this.props.disabled) {\r\n            str.push('bw-disabled');\r\n        }\r\n        return str.join(' ');\r\n    }\r\n    protected getRenderChildren(): React.ReactNode {\r\n        let label: any;\r\n        if (this.props.label) {\r\n            label = <span key='l'>{this.props.label}</span>\r\n        } else if (this.props.children) {\r\n            label = <span key='l'>{this.props.children}</span>;\r\n        }\r\n\r\n        let onChange = (this.props.onChange || this.props.doCheck) ? this.onChange.bind(this) : undefined\r\n        let readonly = this.props.checked && !onChange ? true : undefined;\r\n\r\n        return [<input key='i' type='checkbox' ref='checkbox' onChange={onChange}\r\n            checked={this.props.checked} readOnly={readonly} disabled={this.props.disabled}/>, label];\r\n    }\r\n}\r\n\r\nexport interface ListProps extends WidgetProps {\r\n    disabled?: boolean,\r\n    model?: any[]\r\n    selection?: Selection<any>\r\n    itemRenderer?: ItemRenderer<any>\r\n    doSelect?: (select: boolean, idx: number, item: any) => void\r\n    onItemClick?: (evt: Event, idx: number, item: any) => void\r\n    onItemDoubleClick?: (evt: Event, idx: number, item: any) => void\r\n    onItemContextMenu?: (evt: Event, idx: number, item: any) => void\r\n}\r\n\r\nexport class List extends Widget<ListProps, any>{\r\n    static defaultProps: ListProps = mergeProps({\r\n    }, Widget.defaultProps)\r\n    protected getWidgetSclass() {\r\n        return 'bww-list';\r\n    }\r\n    protected getRenderSclass(): string {\r\n        let str: string[] = [];\r\n        str.push(super.getRenderSclass());\r\n        if (this.props.disabled) {\r\n            str.push('bw-disabled');\r\n        }\r\n        return str.join(' ');\r\n    }\r\n    protected getRenderChildren(): React.ReactNode {\r\n        let props = this.props;\r\n        let selection = props.selection;\r\n        if (props.model) {\r\n            let renderer = props.itemRenderer;\r\n            if (!renderer) {\r\n                let msg = 'Need itemRenderer to render model of List';\r\n                throw msg;\r\n            }\r\n            let childrenNodes = props.model.map((each: any, idx: number) => {\r\n                var key: any = renderer.key(idx, each);\r\n                if (key == undefined) {\r\n                    key = idx;\r\n                }\r\n                let templateNode = renderer.render(idx, each);\r\n                let selected = selection ? selection.isSelected(idx, each) : false;\r\n                let onItemClick = props.onItemClick || props.doSelect ? (evt: Event) => {\r\n                    if (props.onItemClick) {\r\n                        props.onItemClick(evt, idx, each);\r\n                    }\r\n                    if (props.doSelect) {\r\n                        props.doSelect(!selected, idx, each);\r\n                    }\r\n                } : undefined;\r\n\r\n                let onItemDoubleClick = props.onItemDoubleClick ? (evt: Event) => {\r\n                    props.onItemDoubleClick(evt, idx, each);\r\n                } : undefined;\r\n                let onItemContextMenu = props.onItemContextMenu ? (evt: Event) => {\r\n                    props.onItemContextMenu(evt, idx, each);\r\n                } : undefined;\r\n\r\n                return <li key={key} className={selected ? 'bw-selected' : undefined}\r\n                    onClick={onItemClick}\r\n                    onDoubleClick={onItemDoubleClick}\r\n                    onContentMenu={onItemContextMenu} >\r\n                    {templateNode}</li>\r\n            });\r\n            return <ul>{childrenNodes}</ul>\r\n        } else if (props.children) {\r\n            //static children\r\n            let childrenNodes = React.Children.map(props.children, (child: React.ReactChild, idx: number) => {\r\n                let selected = selection ? selection.isSelected(idx, undefined) : false;\r\n                let onItemClick = props.onItemClick || props.doSelect ? (evt: Event) => {\r\n                    if (props.onItemClick) {\r\n                        props.onItemClick(evt, idx, undefined);\r\n                    }\r\n                    if (props.doSelect) {\r\n                        props.doSelect(!selected, idx, undefined);\r\n                    }\r\n                } : undefined;\r\n                let onItemDoubleClick = props.onItemDoubleClick ? (evt: Event) => {\r\n                    props.onItemDoubleClick(evt, idx, null);\r\n                } : undefined;\r\n                let onItemContextMenu = props.onItemContextMenu ? (evt: Event) => {\r\n                    props.onItemContextMenu(evt, idx, null);\r\n                } : undefined;\r\n\r\n                return <li className={selected ? 'bw-selected' : undefined}\r\n                    onClick={onItemClick}\r\n                    onDoubleClick={onItemDoubleClick}\r\n                    onContextMenu={onItemContextMenu} >\r\n                    {child}</li>;\r\n            });\r\n            return <ul>{childrenNodes}</ul>\r\n        } else {\r\n            return <ul></ul>\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//util functions\r\n\r\nexport function isWidgetElemnt(child: React.ReactChild): boolean {\r\n    let casting: any = child;\r\n    return casting ? (casting.type && casting.type._widgetMagic) : false;\r\n}\r\n\r\nexport function getWidgetProps(child: React.ReactChild): WidgetProps {\r\n    let casting: any = child;\r\n    return casting ? casting.props : undefined;\r\n}\r\n\r\nexport function hasHScrollbar(dom: HTMLElement): number {\r\n    let bar = dom.scrollWidth - dom.offsetWidth;\r\n    return bar <= 0 ? 0 : bar;\r\n}\r\nexport function hasVScrollbar(dom: HTMLElement): number {\r\n    let bar = dom.scrollHeight - dom.offsetHeight;\r\n    return bar <= 0 ? 0 : bar;\r\n}\r\n\r\n//http://stackoverflow.com/questions/21064101/understanding-offsetwidth-clientwidth-scrollwidth-and-height-respectively\r\n//http://help.dottoro.com/ljvmcrrn.php\r\n/**\r\n * get inner width without padding and border\r\n */\r\nexport function getInnerWidth(dom: HTMLElement): number {\r\n    let cs = window.getComputedStyle(dom);\r\n    let cr = dom.getBoundingClientRect();\r\n    let r = cr.width - toPxNumber(cs.paddingLeft) - toPxNumber(cs.paddingRight) - toPxNumber(cs.borderLeftWidth) - toPxNumber(cs.borderRightWidth);\r\n    // let r2 = dom.clientWidth - toPxNumber(cs.paddingLeft) - toPxNumber(cs.paddingRight);\r\n    return r;\r\n}\r\n/**\r\n * get inner height without padding and border\r\n */\r\nexport function getInnerHeight(dom: HTMLElement): number {\r\n    let cs = window.getComputedStyle(dom);\r\n    let cr = dom.getBoundingClientRect();\r\n    let r = cr.height - toPxNumber(cs.paddingTop) - toPxNumber(cs.paddingBottom) - toPxNumber(cs.borderTopWidth) - toPxNumber(cs.borderBottomWidth);\r\n    // let r2 = dom.clientHeight - toPxNumber(cs.paddingTop) - toPxNumber(cs.paddingBottom);\r\n    return r;\r\n}\r\n/**\r\n * get outer width width margin\r\n */\r\nexport function getOutterWidth(dom: HTMLElement): number {\r\n    let cs = window.getComputedStyle(dom);\r\n    //to avoid offsetWidth rounding\r\n    let cr = dom.getBoundingClientRect();\r\n    return cr.width + toPxNumber(cs.marginLeft) + toPxNumber(cs.marginRight);\r\n}\r\n/**\r\n * get outer height width margin\r\n */\r\nexport function getOutterHeight(dom: HTMLElement): number {\r\n    let cs = window.getComputedStyle(dom);\r\n    //to avoid offsetHeight rounding\r\n    let cr = dom.getBoundingClientRect();\r\n    return cr.height + toPxNumber(cs.marginTop) + toPxNumber(cs.marginBottom);\r\n}\r\n\r\nexport function toPxNumber(pxvar: any): number {\r\n    if ('string' == typeof pxvar) {\r\n        return Number(pxvar.replace('px', ''));\r\n    } else if ('number' == typeof pxvar) {\r\n        return pxvar;\r\n    }\r\n    return 0;\r\n}\r\n\r\n\r\n/**\r\n * simply merge properties by supprots if props doesn't has the fields,\r\n * NOTE this method doesn't do the deep merge\r\n * @returns The props\r\n */\r\nexport function mergeProps(props: any, ...supports: any[]): any {\r\n    supports.forEach((each) => {\r\n        for (let prop in each) {\r\n            if (props[prop] == undefined) {\r\n                props[prop] = each[prop];\r\n            }\r\n        }\r\n    });\r\n    return props;\r\n}"]}