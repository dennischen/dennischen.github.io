{"version":3,"sources":["test/commentbox.tsx"],"names":[],"mappings":"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","file":"../../js/test/commentbox.js","sourcesContent":["/// <reference path=\"../definition/react.d.ts\" />\r\n/// <reference path=\"../definition/react-dom.d.ts\" />\r\n/// <reference path=\"../definition/jquery.d.ts\" />\r\nimport React = require('react');\r\nimport ReactDOM = require('react-dom');\r\nimport jq = require('jquery');\r\n// import marked = require('marked');\r\n\r\nexport interface Comment {\r\n\tid: number|string\r\n\tauthor: string\r\n\ttext: string\r\n\tfresh?: boolean\r\n}\r\nexport interface CommentDelete {\r\n\tid: number|string\r\n}\r\nexport interface CommentUpdate {\r\n\tid: number|string\r\n\ttext?: string\r\n}\r\n\r\nexport interface CommentBoxProps {\r\n\turl: string,\r\n\tpollInterval?: number\r\n}\r\nexport interface CommentBoxStates {\r\n\tdata: Comment[]\r\n}\r\n\r\nexport class CommentBox extends React.Component<CommentBoxProps, CommentBoxStates>{\r\n\r\n\tconstructor(props: CommentBoxProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { data: new Array() };\r\n\t}\r\n\tloadCommentsFromServer() {\r\n\t\tjq.ajax({\r\n\t\t\turl: this.props.url,\r\n\t\t\tdataType: 'json',\r\n\t\t\tcache: false,\r\n\t\t\tsuccess: function (data: Comment[]) {\r\n\t\t\t\tthis.setState({ data: data });\r\n\t\t\t}.bind(this),\r\n\t\t\terror: function (xhr: any, status: any, err: any) {\r\n\t\t\t\tconsole.error(this.props.url, status, err.toString());\r\n\t\t\t}.bind(this)\r\n\t\t});\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tthis.loadCommentsFromServer();\r\n\t\t//()=>{} for binding this\r\n\t\tsetInterval(() => { this.loadCommentsFromServer() }, this.props.pollInterval);\r\n\t}\r\n\thandleCommentSubmit(comment: Comment) {\r\n\t\tlet comments = this.state.data;\r\n\t\tthis.setState({ data: comments.concat([comment]) });\r\n\r\n\t\tjq.ajax({\r\n\t\t\turl: this.props.url,\r\n\t\t\tdataType: 'JSON',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: comment,\r\n\t\t\tsuccess: function (data: Comment) {\r\n\t\t\t\t//this.setState({data: data});\r\n\t\t\t}.bind(this),\r\n\t\t\terror: function (xhr: any, status: any, err: any) {\r\n\t\t\t\t//this.setState({data: comments});\r\n\t\t\t\tconsole.error(this.props.url, status, err.toString());\r\n\t\t\t}.bind(this)\r\n\t\t});\r\n\t}\r\n\thandleCommentDelete(comment: CommentDelete) {\r\n\t\tlet comments = this.state.data;\r\n\t\tcomments.forEach((each: Comment, idx: number) => {\r\n\t\t\tif (comment.id == each.id) {\r\n\t\t\t\tcomments.splice(idx, 1);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setState({ data: comments });\r\n\t\tjq.ajax({\r\n\t\t\turl: this.props.url + \"/\" + comment.id,\r\n\t\t\tdataType: 'json',\r\n\t\t\ttype: 'DELETE',\r\n\t\t\tsuccess: function (data: CommentDelete) {\r\n\t\t\t\t//this.setState({data: data});\r\n\t\t\t}.bind(this),\r\n\t\t\terror: function (xhr: any, status: any, err: any) {\r\n\t\t\t\t//this.setState({data: comments});\r\n\t\t\t\tconsole.error(this.props.url, status, err.toString());\r\n\t\t\t}.bind(this)\r\n\t\t});\r\n\t}\r\n\thandleCommentUpdate(comment: CommentUpdate) {\r\n\t\tlet comments = this.state.data;\r\n\t\tcomments.forEach((each: Comment, idx: number) => {\r\n\t\t\tif (each.id == comment.id) {\r\n\t\t\t\teach.text = comment.text;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setState({ data: comments });\r\n\t\t$.ajax({\r\n\t\t\turl: this.props.url + \"/\" + comment.id,\r\n\t\t\tdataType: 'json',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: comment,\r\n\t\t\tsuccess: function (data: Comment) {\r\n\t\t\t\t//this.setState({data: data});\r\n\t\t\t}.bind(this),\r\n\t\t\terror: function (xhr: any, status: any, err: any) {\r\n\t\t\t\t//this.setState({data: comments});\r\n\t\t\t\tconsole.error(this.props.url, status, err.toString());\r\n\t\t\t}.bind(this)\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"commentBox\">\r\n\t\t\t\t<h1>Comments</h1>\r\n\t\t\t\t<CommentForm onCommentSubmit={comment => this.handleCommentSubmit(comment) } />\r\n\t\t\t\t<CommentList data={this.state.data}\r\n\t\t\t\t\tonCommentDelete={comment => this.handleCommentDelete(comment) }\r\n\t\t\t\t\tonCommentUpdate={comment => this.handleCommentUpdate(comment) }/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\ninterface CommentListProps {\r\n\tdata: Comment[]\r\n\tonCommentUpdate: (comment: CommentUpdate) => void\r\n\tonCommentDelete: (comment: CommentDelete) => void\r\n}\r\n\r\nclass CommentList extends React.Component<CommentListProps, any>{\r\n\trender() {\r\n\t\tlet commentNodes = this.props.data.map(function (comment: Comment) {\r\n\t\t\treturn (\r\n\t\t\t\t<CommentItem comment={comment} key={comment.id}\r\n\t\t\t\t\tonCommentDelete={this.props.onCommentDelete}\r\n\t\t\t\t\tonCommentUpdate={this.props.onCommentUpdate}>\r\n\t\t\t\t</CommentItem>\r\n\t\t\t);\r\n\t\t}, this);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"commentList\">\r\n\t\t\t\t{commentNodes}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\ninterface CommentItemProps {\r\n\tcomment: Comment\r\n\tonCommentUpdate: (comment: CommentUpdate) => void\r\n\tonCommentDelete: (comment: CommentDelete) => void\r\n}\r\nclass CommentItem extends React.Component<CommentItemProps, any>{\r\n\tconstructor(props: CommentItemProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { text: '' };\r\n\t}\r\n\trawMarkup() {\r\n\t\tlet rawMarkup = this.props.comment.text;//marked(this.props.text, { sanitize: true });\r\n\t\treturn { __html: rawMarkup };\r\n\t}\r\n\thandleDelete() {\r\n\t\tthis.props.onCommentDelete({ id: this.props.comment.id });\r\n\t}\r\n\thandleUpdate() {\r\n\t\tlet text = this.state.text.trim();\r\n\t\tif (!text) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.props.onCommentUpdate({ id: this.props.comment.id, text: text });\r\n\t}\r\n\thandleTextChange(e: any) {\r\n\t\tthis.setState({ text: e.target.value });\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"comment\">\r\n\t\t\t\t<h2 className=\"commentAuthor\">\r\n\t\t\t\t\t{this.props.comment.author}\r\n\t\t\t\t</h2>\r\n\t\t\t\t<span dangerouslySetInnerHTML={this.rawMarkup() } />\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={this.props.comment.text}\r\n\t\t\t\t\tvalue={this.state.text}\r\n\t\t\t\t\tdisabled={this.props.comment.fresh}\r\n\t\t\t\t\tonChange={e => this.handleTextChange(e) }\r\n\t\t\t\t\t/><br/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button onClick={e => this.handleDelete() } disabled={this.props.comment.fresh}>Delete</button>\r\n\t\t\t\t\t<button onClick={e => this.handleUpdate() } disabled={this.props.comment.fresh}>Update</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\ninterface CommentFormProps {\r\n\tonCommentSubmit: (comment: Comment) => void\r\n}\r\nclass CommentForm extends React.Component<CommentFormProps, any>{\r\n\tconstructor(props: CommentFormProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { author: '', text: '' };\r\n\t}\r\n\thandleAuthorChange(e: any) {\r\n\t\tthis.setState({ author: e.target.value });\r\n\t}\r\n\thandleTextChange(e: any) {\r\n\t\tthis.setState({ text: e.target.value });\r\n\t}\r\n\thandleSubmit(e: any) {\r\n\t\te.preventDefault();\r\n\t\tlet author = this.state.author.trim();\r\n\t\tlet text = this.state.text.trim();\r\n\t\tif (!text || !author) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.props.onCommentSubmit({ id: Date.now(), author: author, text: text, fresh: true });\r\n\t\tthis.setState({ author: '', text: '' });\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<form className=\"commentForm\" onSubmit={e => this.handleSubmit(e) }>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Your name\"\r\n\t\t\t\t\t\tvalue={this.state.author}\r\n\t\t\t\t\t\tonChange={e => this.handleAuthorChange(e) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Say something...\"\r\n\t\t\t\t\t\tvalue={this.state.text}\r\n\t\t\t\t\t\tonChange={e => this.handleTextChange(e) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t<input type=\"submit\" value=\"Post\" />\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t);\r\n\t}\r\n}"]}